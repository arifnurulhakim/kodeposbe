import{_ as H,v as J,r as m,m as Q,o as W,G as S,q as X,b as k,c as f,d as b,e as t,f as l,g as d,i as v,t as p,n as V,k as y,p as Z,l as ee}from"./index-7af86d08.js";const i=K=>(Z("data-v-18b0514f"),K=K(),ee(),K),ae={class:"grid"},le={class:"col-12"},se={class:"card"},te={class:"my-2"},oe={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},de=i(()=>t("h5",{class:"m-0"},"Desa",-1)),ie={class:"block mt-2 md:mt-0 p-input-icon-left"},ne=i(()=>t("i",{class:"pi pi-search"},null,-1)),ue=i(()=>t("span",{class:"p-column-title"},"Kode Desa",-1)),re=i(()=>t("span",{class:"p-column-title"},"Kode Kecamatan",-1)),ce=i(()=>t("span",{class:"p-column-title"},"Kode Kabupaten",-1)),ve=i(()=>t("span",{class:"p-column-title"},"Kode Provinsi",-1)),me=i(()=>t("span",{class:"p-column-title"},"Nama Desa",-1)),pe=i(()=>t("span",{class:"p-column-title"},"Nama Kecamatan",-1)),_e=i(()=>t("span",{class:"p-column-title"},"Nama Kabupaten",-1)),ke=i(()=>t("span",{class:"p-column-title"},"Nama Provinsi",-1)),fe={class:"field"},be=i(()=>t("label",{for:"kode_desa"},"Kode Desa",-1)),he={key:0,class:"p-invalid"},ye={class:"field"},De=i(()=>t("label",{for:"kode_kec"},"Kode Kecamatan",-1)),ge={key:0,class:"p-invalid"},we={class:"field"},xe=i(()=>t("label",{for:"kode_kab"},"Kode Kabupaten",-1)),Ce={key:0,class:"p-invalid"},Se={class:"field"},Ve=i(()=>t("label",{for:"kode_prov"},"Kode Provinsi",-1)),Ke={key:0,class:"p-invalid"},Ne={class:"field"},Pe=i(()=>t("label",{for:"nama_desa"},"Nama Desa",-1)),Te={key:0,class:"p-invalid"},Ue={class:"flex align-items-center justify-content-center"},Ie=i(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),qe={key:0},Me={class:"flex align-items-center justify-content-center"},Le=i(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Be={key:0},Fe={__name:"Desa",setup(K){const D=J(),r=m(null),_=m(!1),x=m(!1),C=m(!1),e=m({}),h=m(null),T=m(null),N=m({}),n=m(!1);Q(()=>{R()}),W(()=>{U()});const U=()=>{S.get("api/desa").then(o=>{o.data.status==="success"&&(r.value=o.data.data)}).catch(o=>{console.error(o)})},I=()=>{e.value={},n.value=!1,_.value=!0},q=()=>{_.value=!1,n.value=!1},M=async()=>{if(n.value=!0,e.value.kode_desa&&e.value.kode_kec&&e.value.kode_kab&&e.value.kode_prov&&e.value.nama_desa){if(console.log(e.value.id),e.value.id){const o=$(e.value.id);r.value[o]=e.value,await S.put(`/api/desa/${e.value.id}`,{kode_desa:e.value.kode_desa,kode_kec:e.value.kode_kec,kode_prov:e.value.kode_prov,nama_desa:e.value.nama_desa}),D.add({severity:"success",summary:"Successful",detail:"Desa Updated",life:3e3}),_.value=!1,e.value={}}else r.value.push(e.value),await S.post("/api/desa",{kode_desa:e.value.kode_desa,kode_kec:e.value.kode_kec,kode_kab:e.value.kode_kab,kode_prov:e.value.kode_prov,nama_desa:e.value.nama_desa}),D.add({severity:"success",summary:"Successful",detail:"Desa Created",life:3e3}),_.value=!1,e.value={};_.value=!1,e.value={}}},L=o=>{e.value={...o},console.log(e),_.value=!0},B=o=>{e.value=o,x.value=!0},F=async()=>{try{await S.delete(`/api/desa/${e.value.id}`),r.value=r.value.filter(o=>o.id!==e.value.id),x.value=!1,e.value={},D.add({severity:"success",summary:"Successful",detail:"Desa Deleted",life:3e3})}catch(o){console.error(o),D.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},$=o=>{let s=-1;for(let g=0;g<r.value.length;g++)if(r.value[g].id===o){s=g;break}return s},A=()=>{T.value.exportCSV()},z=()=>{C.value=!0},E=async()=>{try{const o=h.value.map(s=>s.id);await S.delete("/api/desa",{data:{ids:o}}),r.value=r.value.filter(s=>!h.value.includes(s)),C.value=!1,h.value=null,D.add({severity:"success",summary:"Successful",detail:"Desas Deleted",life:3e3})}catch(o){console.error(o),D.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},R=()=>{N.value={global:{value:null,matchMode:X.CONTAINS}}};return(o,s)=>{const g=k("Toast"),u=k("Button"),j=k("FileUpload"),O=k("Toolbar"),w=k("InputText"),c=k("Column"),Y=k("DataTable"),P=k("Dialog");return f(),b("div",ae,[t("div",le,[t("div",se,[l(g),l(O,{class:"mb-4"},{start:d(()=>[t("div",te,[l(u,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:I}),l(u,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:z,disabled:!h.value||!h.value.length},null,8,["disabled"])])]),end:d(()=>[l(j,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),l(u,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:s[0]||(s[0]=a=>A(a))})]),_:1}),l(Y,{ref_key:"dt",ref:T,value:r.value,selection:h.value,"onUpdate:selection":s[2]||(s[2]=a=>h.value=a),dataKey:"id",paginator:!0,rows:10,filters:N.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} desas",responsiveLayout:"scroll"},{header:d(()=>[t("div",oe,[de,t("span",ie,[ne,l(w,{modelValue:N.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=a=>N.value.global.value=a),placeholder:"Search..."},null,8,["modelValue"])])])]),default:d(()=>[l(c,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(c,{field:"kode_desa",header:"kode desa",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:d(a=>[ue,v(" "+p(a.data.kode_desa),1)]),_:1}),l(c,{field:"kode_kec",header:"kode kecamatan",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:d(a=>[re,v(" "+p(a.data.kode_kec),1)]),_:1}),l(c,{field:"kode_kab",header:"kode kabupaten",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:d(a=>[ce,v(" "+p(a.data.kode_kab),1)]),_:1}),l(c,{field:"kode_prov",header:"kode provinsi",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:d(a=>[ve,v(" "+p(a.data.kode_prov),1)]),_:1}),l(c,{field:"nama_desa",header:"nama desa",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:d(a=>[me,v(" "+p(a.data.nama_desa),1)]),_:1}),l(c,{field:"nama_kecamatan",header:"nama kecamatan",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:d(a=>[pe,v(" "+p(a.data.nama_kecamatan),1)]),_:1}),l(c,{field:"nama_kabupaten",header:"nama kabupaten",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:d(a=>[_e,v(" "+p(a.data.nama_kabupaten),1)]),_:1}),l(c,{field:"nama_provinsi",header:"nama provinsi",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:d(a=>[ke,v(" "+p(a.data.nama_provinsi),1)]),_:1}),l(c,{headerStyle:"min-width:10rem;"},{body:d(a=>[l(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>L(a.data)},null,8,["onClick"]),l(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>B(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),l(P,{visible:_.value,"onUpdate:visible":s[8]||(s[8]=a=>_.value=a),style:{width:"450px"},header:"Desa Details",modal:!0,class:"p-fluid"},{footer:d(()=>[l(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:q}),l(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:M})]),default:d(()=>[t("div",fe,[be,l(w,{id:"kode_desa    ",modelValue:e.value.kode_desa,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.kode_desa=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:V({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_desa?(f(),b("small",he,"Kode is required.")):y("",!0)]),t("div",ye,[De,l(w,{id:"kode_kec",modelValue:e.value.kode_kec,"onUpdate:modelValue":s[4]||(s[4]=a=>e.value.kode_kec=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:V({"p-invalid":n.value&&!e.value.kode_kec})},null,8,["modelValue","class"]),n.value&&!e.value.kode_kec?(f(),b("small",ge,"Kode is required.")):y("",!0)]),t("div",we,[xe,l(w,{id:"kode_kab",modelValue:e.value.kode_kab,"onUpdate:modelValue":s[5]||(s[5]=a=>e.value.kode_kab=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:V({"p-invalid":n.value&&!e.value.kode_kab})},null,8,["modelValue","class"]),n.value&&!e.value.kode_kab?(f(),b("small",Ce,"Kode Desa is required.")):y("",!0)]),t("div",Se,[Ve,l(w,{id:"kode_prov",modelValue:e.value.kode_prov,"onUpdate:modelValue":s[6]||(s[6]=a=>e.value.kode_prov=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:V({"p-invalid":n.value&&!e.value.kode_prov})},null,8,["modelValue","class"]),n.value&&!e.value.kode_prov?(f(),b("small",Ke,"Kode Desa is required.")):y("",!0)]),t("div",Ne,[Pe,l(w,{id:"nama_desa",modelValue:e.value.nama_desa,"onUpdate:modelValue":s[7]||(s[7]=a=>e.value.nama_desa=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:V({"p-invalid":n.value&&!e.value.nama_desa})},null,8,["modelValue","class"]),n.value&&!e.value.nama_desa?(f(),b("small",Te,"Nama Desa is required.")):y("",!0)])]),_:1},8,["visible"]),l(P,{visible:x.value,"onUpdate:visible":s[10]||(s[10]=a=>x.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[l(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[9]||(s[9]=a=>x.value=!1)}),l(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:d(()=>[t("div",Ue,[Ie,e.value?(f(),b("span",qe,[v("Are you sure you want to delete "),t("b",null,p(e.value.name),1),v("?")])):y("",!0)])]),_:1},8,["visible"]),l(P,{visible:C.value,"onUpdate:visible":s[12]||(s[12]=a=>C.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[l(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[11]||(s[11]=a=>C.value=!1)}),l(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:E})]),default:d(()=>[t("div",Me,[Le,e.value?(f(),b("span",Be,"Are you sure you want to delete the selected desas?")):y("",!0)])]),_:1},8,["visible"])])])])}}},Ae=H(Fe,[["__scopeId","data-v-18b0514f"]]);export{Ae as default};
