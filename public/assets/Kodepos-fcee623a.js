import{_ as H,v as J,r as b,m as Q,o as W,G as C,q as X,b as y,c as p,d as v,e as l,f as a,g as t,i as r,t as c,n as w,k,p as Z,l as ee}from"./index-7af86d08.js";const s=D=>(Z("data-v-bbd4e1d8"),D=D(),ee(),D),oe={class:"grid"},ae={class:"col-12"},le={class:"card"},de={class:"my-2"},se={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},te=s(()=>l("h5",{class:"m-0"},"Kodepos",-1)),ie={class:"block mt-2 md:mt-0 p-input-icon-left"},ne=s(()=>l("i",{class:"pi pi-search"},null,-1)),ue=s(()=>l("span",{class:"p-column-title"},"Kode Dagri",-1)),re=s(()=>l("span",{class:"p-column-title"},"Kode Pos Lama",-1)),ce=s(()=>l("span",{class:"p-column-title"},"Kode pos modifikasi",-1)),_e=s(()=>l("span",{class:"p-column-title"},"Kode pos baru",-1)),pe=s(()=>l("span",{class:"p-column-title"},"Kode Desa",-1)),ve=s(()=>l("span",{class:"p-column-title"},"Kode Kecamatan",-1)),me=s(()=>l("span",{class:"p-column-title"},"Kode Kabupaten",-1)),ke=s(()=>l("span",{class:"p-column-title"},"Kode Provinsi",-1)),fe=s(()=>l("span",{class:"p-column-title"},"Nama Desa",-1)),be=s(()=>l("span",{class:"p-column-title"},"Nama Kecamatan",-1)),he=s(()=>l("span",{class:"p-column-title"},"Nama Kabupaten",-1)),ye=s(()=>l("span",{class:"p-column-title"},"Nama Provinsi",-1)),we={class:"field"},ge=s(()=>l("label",{for:"kode_dagri"},"Kode Dagri",-1)),Ke={key:0,class:"p-invalid"},xe={class:"field"},Ve=s(()=>l("label",{for:"kode_old"},"Kode Lama",-1)),Se={key:0,class:"p-invalid"},Ce={class:"field"},De=s(()=>l("label",{for:"kode_mod"},"Kode Modifikasi",-1)),qe={key:0,class:"p-invalid"},Pe={class:"field"},Ue=s(()=>l("label",{for:"kode_new"},"Kode Baru",-1)),Me={key:0,class:"p-invalid"},Ne={class:"field"},Te=s(()=>l("label",{for:"kode_desa"},"Kode Desa",-1)),Ie={key:0,class:"p-invalid"},Le={class:"field"},Be=s(()=>l("label",{for:"kode_kec"},"Kode Kecamatan",-1)),Fe={key:0,class:"p-invalid"},$e={class:"field"},Ae=s(()=>l("label",{for:"kode_kab"},"Kode Kabupaten",-1)),ze={key:0,class:"p-invalid"},Ee={class:"field"},Re=s(()=>l("label",{for:"kode_prov"},"Kode Provinsi",-1)),je={key:0,class:"p-invalid"},Oe={class:"flex align-items-center justify-content-center"},Ye=s(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ge={key:0},He={class:"flex align-items-center justify-content-center"},Je=s(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Qe={key:0},We={__name:"Kodepos",setup(D){const K=J(),m=b(null),h=b(!1),V=b(!1),S=b(!1),e=b({}),g=b(null),U=b(null),q=b({}),n=b(!1);Q(()=>{R()}),W(()=>{M()});const M=()=>{C.get("api/kode-pos").then(i=>{i.data.status==="success"&&(m.value=i.data.data)}).catch(i=>{console.error(i)})},N=()=>{e.value={},n.value=!1,h.value=!0},T=()=>{h.value=!1,n.value=!1},I=async()=>{if(n.value=!0,e.value.kode_dagri&&e.value.kode_old&&e.value.kode_mod&&e.value.kode_new&&e.value.kode_desa&&e.value.kode_kec&&e.value.kode_kab&&e.value.kode_prov){if(console.log(e.value.id),e.value.id){const i=$(e.value.id);m.value[i]=e.value,await C.put(`/api/kode-pos/${e.value.id}`,{kode_dagri:e.value.kode_dagri,kode_old:e.value.kode_old,kode_mod:e.value.kode_mod,kode_new:e.value.kode_new,kode_desa:e.value.kode_desa,kode_kec:e.value.kode_kec,kode_prov:e.value.kode_prov}),K.add({severity:"success",summary:"Successful",detail:"Kodepos Updated",life:3e3}),h.value=!1,e.value={}}else m.value.push(e.value),await C.post("/api/kode-pos",{kode_dagri:e.value.kode_dagri,kode_old:e.value.kode_old,kode_mod:e.value.kode_mod,kode_new:e.value.kode_new,kode_desa:e.value.kode_desa,kode_kec:e.value.kode_kec,kode_prov:e.value.kode_prov}),K.add({severity:"success",summary:"Successful",detail:"Kodepos Created",life:3e3}),h.value=!1,e.value={};h.value=!1,e.value={}}},L=i=>{e.value={...i},console.log(e),h.value=!0},B=i=>{e.value=i,V.value=!0},F=async()=>{try{await C.delete(`/api/kode-pos/${e.value.id}`),m.value=m.value.filter(i=>i.id!==e.value.id),V.value=!1,e.value={},K.add({severity:"success",summary:"Successful",detail:"Kodepos Deleted",life:3e3})}catch(i){console.error(i),K.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},$=i=>{let d=-1;for(let x=0;x<m.value.length;x++)if(m.value[x].id===i){d=x;break}return d},A=()=>{U.value.exportCSV()},z=()=>{S.value=!0},E=async()=>{try{const i=g.value.map(d=>d.id);await C.delete("/api/kodepos",{data:{ids:i}}),m.value=m.value.filter(d=>!g.value.includes(d)),S.value=!1,g.value=null,K.add({severity:"success",summary:"Successful",detail:"Kodeposs Deleted",life:3e3})}catch(i){console.error(i),K.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},R=()=>{q.value={global:{value:null,matchMode:X.CONTAINS}}};return(i,d)=>{const x=y("Toast"),_=y("Button"),j=y("FileUpload"),O=y("Toolbar"),f=y("InputText"),u=y("Column"),Y=y("DataTable"),P=y("Dialog");return p(),v("div",oe,[l("div",ae,[l("div",le,[a(x),a(O,{class:"mb-4"},{start:t(()=>[l("div",de,[a(_,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:N}),a(_,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:z,disabled:!g.value||!g.value.length},null,8,["disabled"])])]),end:t(()=>[a(j,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),a(_,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:d[0]||(d[0]=o=>A(o))})]),_:1}),a(Y,{ref_key:"dt",ref:U,value:m.value,selection:g.value,"onUpdate:selection":d[2]||(d[2]=o=>g.value=o),dataKey:"id",paginator:!0,rows:10,filters:q.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} kodeposs",responsiveLayout:"scroll"},{header:t(()=>[l("div",se,[te,l("span",ie,[ne,a(f,{modelValue:q.value.global.value,"onUpdate:modelValue":d[1]||(d[1]=o=>q.value.global.value=o),placeholder:"Search..."},null,8,["modelValue"])])])]),default:t(()=>[a(u,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(u,{field:"kode_dagri",header:"kode dagri",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[ue,r(" "+c(o.data.kode_dagri),1)]),_:1}),a(u,{field:"kode_old",header:"kode pos lama",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[re,r(" "+c(o.data.kode_old),1)]),_:1}),a(u,{field:"kode_mod",header:"kode pos modifikasi",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[ce,r(" "+c(o.data.kode_mod),1)]),_:1}),a(u,{field:"kode_new",header:"kode pos baru",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[_e,r(" "+c(o.data.kode_new),1)]),_:1}),a(u,{field:"kode_desa",header:"kode desa",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[pe,r(" "+c(o.data.kode_desa),1)]),_:1}),a(u,{field:"kode_kec",header:"kode kecamatan",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[ve,r(" "+c(o.data.kode_kec),1)]),_:1}),a(u,{field:"kode_kab",header:"kode kabupaten",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[me,r(" "+c(o.data.kode_kab),1)]),_:1}),a(u,{field:"kode_prov",header:"kode provinsi",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[ke,r(" "+c(o.data.kode_prov),1)]),_:1}),a(u,{field:"nama_desa",header:"nama desa",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[fe,r(" "+c(o.data.nama_desa),1)]),_:1}),a(u,{field:"nama_kecamatan",header:"nama kecamatan",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[be,r(" "+c(o.data.nama_kecamatan),1)]),_:1}),a(u,{field:"nama_kabupaten",header:"nama kabupaten",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:t(o=>[he,r(" "+c(o.data.nama_kabupaten),1)]),_:1}),a(u,{field:"nama_provinsi",header:"nama provinsi",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:t(o=>[ye,r(" "+c(o.data.nama_provinsi),1)]),_:1}),a(u,{headerStyle:"min-width:10rem;"},{body:t(o=>[a(_,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>L(o.data)},null,8,["onClick"]),a(_,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>B(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),a(P,{visible:h.value,"onUpdate:visible":d[11]||(d[11]=o=>h.value=o),style:{width:"450px"},header:"Kodepos Details",modal:!0,class:"p-fluid"},{footer:t(()=>[a(_,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:T}),a(_,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:I})]),default:t(()=>[l("div",we,[ge,a(f,{id:"kode_dagri",modelValue:e.value.kode_dagri,"onUpdate:modelValue":d[3]||(d[3]=o=>e.value.kode_dagri=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_dagri?(p(),v("small",Ke,"Kode desa is required.")):k("",!0)]),l("div",xe,[Ve,a(f,{id:"kode_old",modelValue:e.value.kode_old,"onUpdate:modelValue":d[4]||(d[4]=o=>e.value.kode_old=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_old?(p(),v("small",Se,"Kode desa is required.")):k("",!0)]),l("div",Ce,[De,a(f,{id:"kode_mod",modelValue:e.value.kode_mod,"onUpdate:modelValue":d[5]||(d[5]=o=>e.value.kode_mod=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_mod?(p(),v("small",qe,"Kode desa is required.")):k("",!0)]),l("div",Pe,[Ue,a(f,{id:"kode_new",modelValue:e.value.kode_new,"onUpdate:modelValue":d[6]||(d[6]=o=>e.value.kode_new=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_new?(p(),v("small",Me,"Kode desa is required.")):k("",!0)]),l("div",Ne,[Te,a(f,{id:"kode_desa    ",modelValue:e.value.kode_desa,"onUpdate:modelValue":d[7]||(d[7]=o=>e.value.kode_desa=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_desa?(p(),v("small",Ie,"Kode desa is required.")):k("",!0)]),l("div",Le,[Be,a(f,{id:"kode_kec",modelValue:e.value.kode_kec,"onUpdate:modelValue":d[8]||(d[8]=o=>e.value.kode_kec=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_kec})},null,8,["modelValue","class"]),n.value&&!e.value.kode_kec?(p(),v("small",Fe,"Kode kecamatan is required.")):k("",!0)]),l("div",$e,[Ae,a(f,{id:"kode_kab",modelValue:e.value.kode_kab,"onUpdate:modelValue":d[9]||(d[9]=o=>e.value.kode_kab=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_kab})},null,8,["modelValue","class"]),n.value&&!e.value.kode_kab?(p(),v("small",ze,"Kode kabupaten is required.")):k("",!0)]),l("div",Ee,[Re,a(f,{id:"kode_prov",modelValue:e.value.kode_prov,"onUpdate:modelValue":d[10]||(d[10]=o=>e.value.kode_prov=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":n.value&&!e.value.kode_prov})},null,8,["modelValue","class"]),n.value&&!e.value.kode_prov?(p(),v("small",je,"Kode Provinsi is required.")):k("",!0)])]),_:1},8,["visible"]),a(P,{visible:V.value,"onUpdate:visible":d[13]||(d[13]=o=>V.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:t(()=>[a(_,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:d[12]||(d[12]=o=>V.value=!1)}),a(_,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:t(()=>[l("div",Oe,[Ye,e.value?(p(),v("span",Ge,[r("Are you sure you want to delete "),l("b",null,c(e.value.name),1),r("?")])):k("",!0)])]),_:1},8,["visible"]),a(P,{visible:S.value,"onUpdate:visible":d[15]||(d[15]=o=>S.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:t(()=>[a(_,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:d[14]||(d[14]=o=>S.value=!1)}),a(_,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:E})]),default:t(()=>[l("div",He,[Je,e.value?(p(),v("span",Qe,"Are you sure you want to delete the selected kodeposs?")):k("",!0)])]),_:1},8,["visible"])])])])}}},Ze=H(We,[["__scopeId","data-v-bbd4e1d8"]]);export{Ze as default};
